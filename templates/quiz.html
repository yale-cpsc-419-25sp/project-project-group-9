<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>
    {% if edit_mode %}Edit Your Profile{% else %}Mentorship Quiz{% endif %}
  </title>
  <link rel="stylesheet" href="{{ url_for('static', filename='quiz.css') }}">
</head>
<body>
  <header>
    <h1>{% if edit_mode %}Edit Your Profile{% else %}Mentorship Quiz{% endif %}</h1>
    {% if not edit_mode %}<p>Find a Mentor/Mentee Today!</p>{% endif %}
  </header>
  {% with msgs = get_flashed_messages(with_categories=true) %}
    {% if msgs %}
      <ul class="flashes">
        {% for cat, m in msgs %}
          <li class="flash-{{ cat }}">{{ m }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}
  <div class="container">
    <form action="{% if edit_mode %}{{ url_for('profile_edit', user_id=user_id) }}{% else %}{{ url_for('submit_quiz_route') }}{% endif %}"
          method="post" enctype="multipart/form-data">

      <!-- BASIC INFO -->
      <div class="form-section">
        <label>Name:</label>
        <input type="text" name="name" value="{{ name }}" required>
        {% if not edit_mode %}
          <label>Set Password:</label>
          <input type="password" name="password" required>
        {% endif %}
        <label>Pronoun:</label>
        <select name="pronoun" required>
          <option disabled value="">Select your pronoun</option>
          {% for p in pronouns %}
            <option value="{{ p }}" {% if p==pronoun %}selected{% endif %}>{{ p }}</option>
          {% endfor %}
        </select>
        <label>Residential College:</label>
        <select name="residential_college" required>
          <option disabled value="">Select your college</option>
          {% for c in residences %}
            <option value="{{ c }}" {% if c==res_college %}selected{% endif %}>{{ c }}</option>
          {% endfor %}
        </select>
        <label>College Year:</label>
        <select name="college_year" required>
          <option disabled value="">Select your year</option>
          {% for y in years %}
            <option value="{{ y }}" {% if y==college_year %}selected{% endif %}>{{ y }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- HEADSHOT -->
      {% if edit_mode and headshot %}
      <div class="form-section">
        <label>Current Headshot:</label><br>
        <img src="{{ url_for('static', filename=headshot) }}"
             alt="Headshot"
             class="profile-pic-small"><br>
      </div>
      {% endif %}
      <div class="form-section">
        <label>{% if edit_mode %}Upload New Headshot{% else %}Upload Headshot{% endif %}</label>
        <input type="file" name="headshot" accept="image/*">
      </div>

      <!-- MAJORS -->
      <div class="majors-section">
        <h3>Select Your Majors</h3>
        <div class="majors-list">
          {% for m in majors_list %}
            <label>
              <input type="checkbox" name="majors[]" value="{{ m }}"
                     {% if m in sel_maj %}checked{% endif %}>
              {{ m }}
            </label>
          {% endfor %}
        </div>
      </div>

      <!-- AFFINITY GROUPS -->
      <div class="affinity-section">
        <h3>Select Affinity Groups</h3>
        {% for g in affinity_list %}
          <label>
            <input type="checkbox" name="affinity_groups[]" value="{{ g }}"
                   {% if g in sel_aff %}checked{% endif %}>
            {{ g }}
          </label>
        {% endfor %}
      </div>

      <!-- INTERESTS -->
      <div class="interests-section">
        <h3>Select Interests</h3>
        {% for i in interests_list %}
          <label>
            <input type="checkbox" name="interests[]" value="{{ i }}"
                   {% if i in sel_int %}checked{% endif %}>
            {{ i }}
          </label>
        {% endfor %}
      </div>

      <!-- SEEKING -->
      <div class="topics-section">
        <h3>Seeking Mentorship On</h3>
        {% for t in seeking_list %}
          <label>
            <input type="checkbox" name="mentorship_seeking[]" value="{{ t }}"
                   {% if t in sel_seek %}checked{% endif %}>
            {{ t }}
          </label>
        {% endfor %}
      </div>

      <!-- OFFERING -->
      <div class="topics-section">
        <h3>Open to Offering Mentorship On</h3>
        {% for t in offering_list %}
          <label>
            <input type="checkbox" name="mentorship_offering[]" value="{{ t }}"
                   {% if t in sel_off %}checked{% endif %}>
            {{ t }}
          </label>
        {% endfor %}
      </div>

      <!-- ROLES -->
      <div class="roles-section">
        <h3>User Role</h3>
        {% for r in roles_list %}
          <label>
            <input type="checkbox" name="roles[]" value="{{ r }}"
                   {% if r in sel_roles %}checked{% endif %}>
            {{ r }}
          </label>
        {% endfor %}
      </div>

      <!-- TEXTAREAS -->
      <div class="form-section">
        <label>Extracurriculars:</label>
        <textarea name="extracurriculars" required>{{ extracurriculars }}</textarea>
      </div>
      <div class="form-section">
        <label>Work Experience:</label>
        <textarea name="work_experience" required>{{ work_experience }}</textarea>
      </div>
      <div class="form-section">
        <label>2-Sentence Bio:</label>
        <textarea name="bio" required>{{ bio }}</textarea>
      </div>

      <button type="submit" class="submit-btn">
        {% if edit_mode %}Save Changes{% else %}Submit{% endif %}
      </button>
    </form>
  </div>
</body>
</html>
